name: gh-pages-deploy
on:
    push:
        branches:
            - main
permissions:
    contents: write
jobs:
    deploy:
        runs-on: ubuntu-latest
        env:
            GOOGLE_ANALYTICS: ${{ secrets.GOOGLE_ANALYTICS }}
            CARDS: ${{ vars.CARDS }}
            GIT_COMMITTERS: ${{ vars.GIT_COMMITTERS }}
            GIT_REVISION_DATE: ${{ vars.GIT_REVISION_DATE }}
        steps:
            - uses: actions/checkout@v3
              with:
                  fetch-depth: 0
            - uses: actions/setup-python@v4
              with:
                  python-version: 3.x
            - uses: actions/cache@v2
              with:
                  key: ${{ github.ref }}
                  path: .cache
            - run: pip install -r requirements.txt
            - run: mkdocs gh-deploy --force
